<!-- Recent Searches -->
<template x-if="recentSearches.length > 0">
  <section class="recent-searches-container" aria-labelledby="recent-searches-i18n">
    <h3 class="recent-searches-title" id="recent-searches-i18n"></h3>
    <div class="recent-searches-list">
      <template x-for="(search, idx) in recentSearches" :key="idx">
        <button class="recent-search-btn" type="button" @click="selectRecentSearch(search)">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"></circle>
            <polyline points="12 6 12 12 16 14"></polyline>
          </svg>
          <span x-text="search.city + ', ' + search.radius + 'km, ' + search.fuel"></span>
        </button>
      </template>
    </div>
  </section>
</template>

<!-- Fuel Type Chips -->
<div class="fuel-chips">
  <button class="chip" type="button" :class="{ 'active': isFuelSelected('benzina') }" @click="setFuelType('benzina')">
    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M12 2L2 7l10 5 10-5-10-5z"></path>
      <path d="M2 17l10 5 10-5"></path>
      <path d="M2 12l10 5 10-5"></path>
    </svg>
    <span x-text="translate('translation.benzina', 'Gasoline')"></span>
  </button>
  <button class="chip" type="button" :class="{ 'active': isFuelSelected('diesel') }" @click="setFuelType('diesel')">
    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M12 2L2 7l10 5 10-5-10-5z"></path>
      <path d="M2 17l10 5 10-5"></path>
      <path d="M2 12l10 5 10-5"></path>
    </svg>
    <span x-text="translate('translation.diesel', 'Diesel')"></span>
  </button>
  <button class="chip" type="button" :class="{ 'active': isFuelSelected('GPL') }" @click="setFuelType('GPL')">
    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <circle cx="12" cy="12" r="10"></circle>
      <path d="M12 6v6l4 2"></path>
    </svg>
    <span x-text="translate('translation.gpl', 'LPG')"></span>
  </button>
  <button class="chip" type="button" :class="{ 'active': isFuelSelected('metano') }" @click="setFuelType('metano')">
    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <circle cx="12" cy="12" r="10"></circle>
      <path d="M12 6v6l4 2"></path>
    </svg>
    <span x-text="translate('translation.metano', 'Methane')"></span>
  </button>
</div>

<!-- Search Controls -->
<form id="search-form" @submit.prevent="submitForm" aria-labelledby="search-form-title">
  <h2 id="search-form-title" class="sr-only" data-i18n="search_form_title">Search for gas stations</h2>

  <!-- Hidden inputs for form data -->
  <input type="hidden" name="radius" x-model="formData.radius">
  <input type="hidden" name="fuel" x-model="formData.fuel">
  <input type="hidden" name="results" x-model="formData.results">

  <!-- Radius Slider -->
  <div class="radius-control">
    <span class="radius-label" x-text="translate('translation.search_radius', 'Search Radius')"></span>
    <input
      type="range"
      class="radius-slider"
      min="1"
      max="50"
      step="1"
      x-model="formData.radius"
      aria-label="Search radius"
    >
    <span class="radius-value"> <span x-text="formData.radius"></span>km </span>
  </div>

  <!-- Submit Button -->
  <button
    class="btn btn-primary"
    type="submit"
    :disabled="loading || !formData.city"
    style="width: 100%; margin-top: 16px;"
  >
    <span x-show="!loading" x-text="translate('translation.search', 'Search')"></span>
    <span x-show="loading">
      <svg
        class="spinner"
        width="18"
        height="18"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
      >
        <path d="M21 12a9 9 0 1 1-6.219-8.56" stroke-linecap="round"></path>
      </svg>
      <span x-text="translate('translation.loading', 'Loading...')"></span>
    </span>
  </button>
</form>
