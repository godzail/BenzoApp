# PROJECT_DOC.md

## Project Overview

- **Name**: BenzoApp
- **Type**: Fuel service (as described in pyproject.toml)
- **Language**: Python 3.13
- **Framework**: FastAPI (web framework for building APIs)
- **Description**: A service that provides gas station information based on city, radius, and fuel type. The service includes a web interface for user interaction.

## Environment Setup

- **OS**: Windows 11 (as per system information)
- **Shell**: PowerShell 7 (pwsh.exe)
- **Python Version**: 3.13
- **Virtual Environment**: Managed by uv (as indicated by .uv.toml and pyproject.toml)
- **Cache Directory**: d:/.uv_cache (as specified in .uv.toml and pyproject.toml)
- **Activation Command**: No specific activation command needed as uv manages the environment automatically.

## Project Structure

```
BenzoApp/
├── .gitignore
├── .mypy.ini
├── .pytest.ini
├── .rooignore
├── .ruff.toml
├── .uv.toml
├── PRD.md
├── pyproject.toml
├── README.md
├── run.bat
├── test.py
├── TODOLIST.md
├── uv.lock
├── src/
│   ├── main.py
│   └── static/
│       ├── index.html
│       ├── css/
│       │   └── styles.css
│       └── js/
│           └── app.js
├── tests/
│   └── test.py
```

- **src/main.py**: Main FastAPI application with endpoints for searching gas stations and serving the web interface.
- **src/static/**: Contains frontend assets (HTML, CSS, JavaScript) for the web interface.
- **src/static/index.html**: Main HTML page that uses Material Design Components and Alpine.js for the UI.
- **src/static/js/app.js**: JavaScript file that handles form submission and displays results using Alpine.js.
- **src/static/css/styles.css**: CSS file for styling the web interface.
- **tests/test.py**: Test file (currently empty or minimal).
- **pyproject.toml**: Configuration file for project metadata, dependencies, and development tools.
- **uv.lock**: Lock file generated by uv package manager containing exact dependency versions.
- **.uv.toml**: Configuration file for uv package manager specifying cache directory.
- **run.bat**: Batch script to run the application using uv.
- **PRD.md**: Product Requirements Document.
- **TODOLIST.md**: Project TODO list.

## Dependencies

### Production Dependencies

- **cachetools**: General caching library (v6.1.0)
- **fastapi[standard]**: Modern web framework for building APIs (v0.116.1)
- **httptools**: HTTP protocol tools for Python (v0.6.4)
- **humanize**: Human-readable representations of numbers, times, etc. (v4.12.3)
- **loguru**: Python logging made easy (v0.7.3)
- **orjson**: Fast, correct JSON library for Python (v3.11.1)
- **pathvalidate**: Validate and sanitize file/dir names and paths (v3.3.1)
- **pydantic**: Data validation and settings management (v2.11.7)
- **pydantic_settings**: Settings management using pydantic (v2.10.1)
- **python-dateutil**: Extensions to the standard datetime module (v2.9.0.post0)
- **python-dotenv**: Read .env files into os.environ (v1.1.1)
- **python-multipart**: Parse multipart forms (v0.0.20)
- **tabulate**: Pretty-print tabular data (v0.9.0)
- **tzdata**: Timezone data (v2025.2)
- **uvicorn[standard]**: ASGI server for Python (v0.35.0)
- **wrapt**: Python module for decorators, wrappers, and monkey patching (v1.17.2)

### Development Dependencies

- **datamodel-code-generator**: Generate pydantic models from JSON Schema, OpenAPI, and JSON (v0.32.0)
- **httpx**: Next generation HTTP client (v0.28.1)
- **ipykernel**: IPython kernel for Jupyter (v6.30.0)
- **mypy**: Optional static type checker (v1.17.0)
- **pip**: Python package installer (v25.1.1)
- **pip-audit**: Find known vulnerabilities in Python packages (v2.9.0)
- **pipgrip**: Dependency resolver for Python packages (v0.10.14)
- **pytest**: Testing framework (v8.4.1)
- **pytest-cov**: pytest plugin for coverage reporting (v6.2.1)
- **pytest-env**: pytest plugin to set environment variables (v1.1.5)
- **pytest-randomly**: pytest plugin to randomize test order (v3.16.0)
- **pytest-sugar**: pytest plugin for nicer output (v1.0.0)
- **pytest-xdist**: pytest plugin for distributed testing (v3.8.0)
- **ruff**: Extremely fast Python linter and code formatter (v0.12.5)
- **types-cachetools**: Type stubs for cachetools (v6.1.0.20250717)
- **types-python-dateutil**: Type stubs for python-dateutil (v2.9.0.20250708)
- **types-tabulate**: Type stubs for tabulate (v0.9.0.20241207)
- **watchfiles**: Monitor files for changes (v1.1.0)

## Common Commands

- **Run Application**: `uv run uvicorn src.main:app --reload` (defined in run.bat)
- **Install Dependencies**: `uv pip install -e .` (installs project in editable mode with dependencies)
- **Run Tests**: `pytest` (uses pytest configured in pyproject.toml)
- **Lint Code**: `ruff check .` (uses ruff configured in .ruff.toml)
- **Format Code**: `ruff format .` (uses ruff configured in .ruff.toml)
- **Type Check**: `mypy src/` (uses mypy configured in .mypy.ini)
- **Generate Coverage Report**: `pytest --cov=src` (uses pytest-cov)

## Development Workflows

1. **Setup**: Clone repository, ensure Python 3.13 is installed, and uv is available.
2. **Install Dependencies**: Run `uv pip install -e .` to install all dependencies.
3. **Run Application**: Execute `run.bat` or `uv run uvicorn src.main:app --reload` to start the server with auto-reload.
4. **Testing**: Run `pytest` to execute tests. Use `pytest --cov=src` for coverage reporting.
5. **Linting and Formatting**: Use `ruff check .` for linting and `ruff format .` for formatting.
6. **Type Checking**: Run `mypy src/` to check for type errors.
7. **Dependency Management**: Use `uv` commands to manage dependencies as specified in pyproject.toml.

## Known Patterns & Conventions

- **Code Style**: Uses Ruff for linting and formatting, indicating adherence to PEP 8 with some customizations.
- **Testing**: Uses pytest with plugins for coverage, environment management, randomization, and distributed testing.
- **Type Hints**: Uses mypy for static type checking, indicating strong emphasis on type safety.
- **Frontend**: Uses Material Design Components for UI, Alpine.js for reactivity, and a simple CSS file for styling.
- **Backend**: Uses FastAPI for building the API with pydantic for data validation and settings management.
- **Environment Management**: Uses uv for package management and virtual environment management.
- **Configuration**: Uses pyproject.toml for project configuration, .env files for environment variables, and .toml files for tool-specific configurations.
- **Naming**: Follows Python naming conventions (snake_case for variables and functions, PascalCase for classes).
- **Logging**: Uses loguru for logging with custom formatting.
- **Error Handling**: Comprehensive error handling in the FastAPI application with logging of errors and exceptions.
